<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kb.star.util.UserDao">
	<!-- 쿼리문 -->
	<!-- 부서id조회 -->
	<select id="departmentAdmin" resultType="int">
		select DepartmentID from
		Users where
		UserID=#{param1}
	</select>
	<!-- 부서의 전체 유저리스트 -->
	<select id="userListAdmin" resultType="com.kb.star.dto.UserListDto">
		SELECT
		u.UserID,
		u.UserName,
		u.Email,
		u.birth,
		u.Password,
		d.DepartmentName,
		t.TeamName,
		u.ProfileImg,
		u.IsDelete,
		u.IsAdmin
		FROM
		Users u
		LEFT JOIN
		Departments d ON u.DepartmentID = d.DepartmentID
		LEFT JOIN
		Teams t ON u.TeamID = t.TeamID
		WHERE
		u.DepartmentID = #{departmentId}
	</select>
	<select id="getdepartmentName" resultType="String" >
	select DepartmentName from Departments where DepartmentID = #{param1};
	</select>
	<select id="getTeamName" resultType="com.kb.star.dto.Teams" >
	select * from Teams where DepartmentID = #{param1};
	</select>
	<insert id="insertUser" parameterType="com.kb.star.dto.UsersDto">
    INSERT INTO Users (UserID, UserName, Email, birth, Password, DepartmentID, TeamID, ProfileImg, IsDelete, IsAdmin)
    VALUES (#{userId}, #{userName}, #{email}, #{birth}, #{userId}, #{departmentId}, #{teamId}, null, false, false)
</insert>
</mapper>